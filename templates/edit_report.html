{% extends "base.html" %}

{% block title %}Editar Reporte - UTP+{% endblock %}

{% block content %}
<div class="container">
    <h3>Editar Estado del Reporte</h3>
    
    <form method="POST" action="{{ url_for('update_report', report_id=report.id) }}">
        <div class="mb-3">
            <label for="status" class="form-label">Estado del Reporte</label>
            <select class="form-select" name="status" id="status" required>
                <option value="lost" {% if report.status == 'lost' %}selected{% endif %}>Perdido</option>
                <option value="found" {% if report.status == 'found' %}selected{% endif %}>Encontrado</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Descripción</label>
            <textarea class="form-control" id="description" name="description" rows="3" disabled>{{ report.description }}</textarea>
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">Ubicación</label>
            <input type="text" class="form-control" id="location" name="location" value="{{ report.location }}" disabled>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Actualizar Estado</button>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
function setReportData(reportId, currentStatus) {
    const formAction = "{{ url_for('update_report', report_id='') }}".replace('','') + reportId; // Asegúrate de concatenar el ID correctamente
    document.querySelector('form').action = formAction;

    const statusSelect = document.getElementById('status');
    if (currentStatus === 'lost') {
        statusSelect.value = 'lost';
    } else if (currentStatus === 'found') {
        statusSelect.value = 'found';
    }
}
</script>
{% endblock %}
